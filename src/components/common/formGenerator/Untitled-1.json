[
    {
        "type": "asyncSelect",
        "label": "Select or Create Credentials",
        "id": "guid",
        "allowIncludeAll": true,
        "includeAllVal": "{}",
        "requestConfig": {
            "url": "http://{{domain}}/api/service/credentials?filter={\"connector\": \"snowflake\"}",
            "method": "GET",
            "params": {},
            "addFormValues": [],
            "body": {}
        },
        "responseConfig": {
            "rootPath": ".records",
            "labelPath": ".name",
            "valuePath": ".id"
        },
        "saveVariables": {
            "host": ".host",
            "port": ".port"
        },
        "allowCreate": true,
        "rules": [
            {
                "type": "required",
                "enabled": true,
                "errorMessage": "Credentials are mandatory to be selected"
            }
        ],
        "createNewLabel": "Create new credential",
        "getFormConfig": {
            "requestConfig": {
                "url": "http://{{domain}}/api/service/configmap?labelSelector=com.atlan.orchestration.credential/source=snowflake,com.atlan.orchestration.credential/version=1",
                "method": "GET",
                "params": {},
                "body": {}
            },
            "rootPath": ".items[0].data.uiConfig"
        }
    },
    {
        "type": "template",
        "id": "host",
        "template": "{{host}}",
        "isVisible": false
    },
    {
        "type": "template",
        "id": "credential-guid",
        "template": "{{guid}}",
        "isVisible": false
    },
    {
        "type": "template",
        "id": "port",
        "template": "{{.port}}",
        "isVisible": false
    },
    {
        "type": "asyncTreeSelect",
        "stringifyValue": true,
        "id": "include-filter",
        "label": "Include Databases/Schemas",
        "requestConfig": {
            "url": "http://{{domain}}/api/sql/metadata/databases",
            "method": "POST",
            "params": {
                "guid": "{{.guid}}"
            },
            "form": {},
            "addFormValues": []
        },
        "responseConfig": {
            "rootPath": ".results",
            "labelPath": "{{.TABLE_CATALOG}}",
            "valuePath": ".TABLE_CATALOG"
        },
        "requestConfig_2": {
            "url": "http://{{domain}}/api/sql/metadata/schemas/{{parent}}",
            "method": "POST",
            "params": {
                "guid": "{{.guid}}"
            },
            "addFormValues": [],
            "body": {
                "schemaExcludePattern": [
                    "INFORMATION_SCHEMA"
                ],
                "schemaIncludePattern": []
            }
        },
        "responseConfig_2": {
            "rootPath": ".results",
            "labelPath": "{{.TABLE_SCHEM}}",
            "valuePath": ".TABLE_SCHEM"
        }
    }
]